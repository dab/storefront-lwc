<template>
  <article class="bike-card" role="article">
    <div class="bike-image-container" onclick={handleViewDetails} role="button" tabindex="0" onkeydown={handleKeyDown}>
      <img 
        src={currentImage} 
        alt={bike.name}
        class="bike-image clickable"
        loading="lazy"
      />
      <div class={stockClass}>
        {stockStatus}
      </div>
    </div>
    
    <div class="bike-details">
      <h3 class="bike-name clickable" onclick={handleViewDetails} role="button" tabindex="0" onkeydown={handleKeyDown}>{bike.name}</h3>
      <p class="bike-brand">{bike.brand}</p>
      <p class="bike-type">{bike.type} bike</p>
      <p class="bike-gear">{bike.gearType}</p>
      
      <div class="price-section">
        <span class="bike-price">{formattedPrice}</span>
      </div>
      
      <div class="color-selection">
        <label class="color-label">Color:</label>
        <select 
          class="color-select"
          onchange={handleColorChange}
        >
          <template for:each={colorOptions} for:item="option">
            <option key={option.value} value={option.value} selected={option.selected}>
              {option.label}
            </option>
          </template>
        </select>
      </div>
      
      <template if:true={isOutOfStock}>
        <button 
          class="add-to-cart-btn"
          disabled
          aria-label={bike.name}
        >
          Out of Stock
        </button>
      </template>
      
      <template if:false={isOutOfStock}>
        <button 
          class="add-to-cart-btn"
          onclick={handleAddToCart}
          aria-label={bike.name}
        >
          Add to Cart
        </button>
      </template>
    </div>
  </article>
</template>